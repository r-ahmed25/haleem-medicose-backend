import mongoose from "mongoose";
import Category from "./models/Category.js";
import dotenv from "dotenv";
import connectDB from "./config/db.js";

dotenv.config({ path: "./.env.local" });

const categories = [
  "Vaccines",
  "Anti-Allergens",
  "Antihistamines",
  "Antibiotics",
  "Blood Pressure Medicines",
  "Cough Syrup",
  "PainKiller",
  "Diabetes Medicines",
];

const seedCategories = async () => {
  try {
    await connectDB();
    console.log("Connected to database");

    for (const catName of categories) {
      const existing = await Category.findOne({
        name: { $regex: new RegExp(`^${catName}$`, "i") },
      });
      if (!existing) {
        const newCat = new Category({ name: catName });
        await newCat.save();
        console.log(`Added category: ${catName}`);
      } else {
        console.log(`Category already exists: ${catName}`);
      }
    }

    console.log("Seeding completed");
    process.exit(0);
  } catch (error) {
    console.error("Error seeding categories:", error);
    process.exit(1);
  }
};

seedCategories(); 
